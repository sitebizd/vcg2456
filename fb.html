<!DOCTYPE html>
<html>
<head>
    <title>Firebase Image Upload</title>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-storage.js"></script>
</head>
<body>
    <select id="folderSelect">
        <!-- Options will be populated dynamically -->
		<option>Folder 1</option>
		<option>Folder 2</option>
		<option>Folder 3</option>
    </select>
	
	
    <input type="file" id="imageUpload" accept="image/*">
    <button id="uploadButton">Upload Image</button>
    <progress id="uploadProgress" value="0" max="100"></progress>
    <img id="uploadedImage" src="#" alt="Uploaded Image" style="display: none;">
    <button id="copyUrlButton" style="display: none;">Copy Image URL</button>

    <script>
        // Initialize Firebase
        var firebaseConfig = {
            apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
            authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
            projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
            storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,
            messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,
            appId: process.env.REACT_APP_FIREBASE_APP_ID
        };
        firebase.initializeApp(firebaseConfig);

        var storage = firebase.storage();
        var storageRef = storage.ref();

        document.getElementById('uploadButton').addEventListener('click', function() {
            var folder = document.getElementById('folderSelect').value;
            var file = document.getElementById('imageUpload').files[0];
            var uploadTask = storageRef.child(folder + '/' + file.name).put(file);

            uploadTask.on('state_changed', function(snapshot) {
                var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                document.getElementById('uploadProgress').value = progress;
            }, function(error) {
                console.error(error);
            }, function() {
                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                    document.getElementById('uploadedImage').src = downloadURL;
                    document.getElementById('uploadedImage').style.display = 'block';
                    document.getElementById('copyUrlButton').style.display = 'block';
                    document.getElementById('copyUrlButton').addEventListener('click', function() {
                        navigator.clipboard.writeText(downloadURL);
                    });
                });
            });
        });
    </script>
</body>
</html>
